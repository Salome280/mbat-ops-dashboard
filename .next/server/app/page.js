(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},28:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(908),r(1506),r(5866);var n=r(3191),a=r(8716),i=r(7922),s=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"/Users/salomemabuse/Cursor Projects/mbat-ops-dashboard/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/salomemabuse/Cursor Projects/mbat-ops-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/salomemabuse/Cursor Projects/mbat-ops-dashboard/app/page.tsx"],u="/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8706:()=>{},4940:(e,t,r)=>{Promise.resolve().then(r.bind(r,8788))},3393:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8788:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tg});var a,i,s,l,o,d,c,u,h,p,m=r(326),x=r(7577),g=r.n(x),f=r(7294),b=r(5047),y=r(902);let v=["Dashboard Summary","Marketing Communication","Merchandise","Finance and Legal","School Relationships","Sponsorship"],w=({activeSection:e,onSectionChange:t,children:r})=>{let n=(0,b.useRouter)(),[a,i]=(0,x.useState)(null);return(0,x.useEffect)(()=>{let e=(0,f.Aj)(y.I,e=>i(e));return()=>e()},[]),(0,m.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,m.jsxs)("aside",{className:"hidden w-64 flex-col border-r border-gray-200 bg-white px-4 py-6 lg:flex",children:[(0,m.jsxs)("div",{className:"mb-6 flex items-center justify-between gap-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-accent text-white font-semibold",children:"MB"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"MBAT Operations"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Internal dashboard"})]})]}),a&&m.jsx("button",{onClick:async()=>{await (0,f.w7)(y.I),n.replace("/login")},className:"rounded-full border border-gray-200 px-2 py-1 text-[11px] font-medium text-gray-600 hover:bg-gray-100",children:"Sign out"})]}),m.jsx("nav",{className:"space-y-1",children:v.map(r=>{let n=e===r;return m.jsx("button",{onClick:()=>t(r),className:`flex w-full items-center justify-between rounded-md px-3 py-2 text-sm font-medium transition ${n?"bg-accent text-white shadow-sm":"text-gray-700 hover:bg-gray-100"}`,children:m.jsx("span",{children:r})},r)})})]}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white/80 backdrop-blur lg:hidden",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-base font-semibold text-gray-900",children:"MBAT Operations"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Internal dashboard"})]}),a&&m.jsx("button",{onClick:async()=>{await (0,f.w7)(y.I),n.replace("/login")},className:"rounded-full border border-gray-200 px-2 py-1 text-[11px] font-medium text-gray-600 hover:bg-gray-100",children:"Sign out"})]}),m.jsx("div",{className:"flex overflow-x-auto border-t border-gray-100",children:v.map(r=>{let n=e===r;return m.jsx("button",{onClick:()=>t(r),className:`whitespace-nowrap px-4 py-2 text-xs font-medium transition ${n?"border-b-2 border-accent text-accent":"text-gray-500 hover:text-gray-700"}`,children:r},r)})})]}),m.jsx("main",{className:"px-4 py-6 lg:px-8 lg:py-8",children:r})]})]})},j=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e),N=e=>{if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?"—":t.toLocaleDateString("en-GB",{day:"2-digit",month:"short"})},S=({totalSponsorsConfirmed:e,revenueSecured:t,revenueTarget:r,pipelineExpectedRevenue:n,upcomingDeadlines:a,highPriorityTasks:i})=>{let s=r>0?Math.min(100,t/r*100):0,l=r>0?Math.min(100,n/r*100):0;return(0,m.jsxs)("div",{className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between gap-3",children:(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Dashboard Summary"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"High-level view of sponsorship revenue and critical operational work."})]})}),(0,m.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:[(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[m.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Sponsors Confirmed"}),m.jsx("p",{className:"mt-3 text-3xl font-semibold text-gray-900",children:e})]}),(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[m.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Revenue Secured"}),m.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:j(t)}),(0,m.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Target ",j(r)]}),m.jsx("div",{className:"mt-3 h-1.5 w-full rounded-full bg-gray-100",children:m.jsx("div",{className:"h-1.5 rounded-full bg-accent transition-all",style:{width:`${s}%`}})})]}),(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[m.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Pipeline Expected Revenue"}),m.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:j(n)}),(0,m.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["vs target ",j(r)]}),m.jsx("div",{className:"mt-3 h-1.5 w-full rounded-full bg-gray-100",children:m.jsx("div",{className:"h-1.5 rounded-full bg-emerald-500 transition-all",style:{width:`${l}%`}})})]}),(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[m.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Combined Coverage"}),m.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:j(t+n)}),(0,m.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[(r>0?Math.min(100,(t+n)/r*100):0).toFixed(0),"% of target"]})]})]}),(0,m.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Upcoming deadlines (next 14 days)"}),(0,m.jsxs)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:[a.length," items"]})]}),m.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-gray-100",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-100 text-sm",children:[m.jsx("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Task"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Section"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Due"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[0===a.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:3,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No upcoming deadlines in the next 14 days."})}),a.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"max-w-[180px] truncate px-3 py-2 text-xs text-gray-900",children:e.title}),m.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:e.section}),m.jsx("td",{className:"px-3 py-2 text-xs text-gray-900",children:N(e.deadline)})]},e.id))]})]})})]}),(0,m.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"High priority tasks"}),(0,m.jsxs)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:[i.length," items"]})]}),m.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-gray-100",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-100 text-sm",children:[m.jsx("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Task"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Section"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Priority"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[0===i.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:3,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No high priority items at the moment."})}),i.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"max-w-[180px] truncate px-3 py-2 text-xs text-gray-900",children:e.title}),m.jsx("td",{className:"px-3 py-2 text-xs text-gray-500",children:e.section}),m.jsx("td",{className:"px-3 py-2 text-xs",children:m.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-medium ${"Critical"===e.priority?"bg-red-100 text-red-700":"High"===e.priority?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-700"}`,children:e.priority})})]},e.id))]})]})})]})]})]})};var C=r(962);let k="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function D(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function E(e){return"nodeType"in e}function M(e){var t,r;return e?D(e)?e:E(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function R(e){let{Document:t}=M(e);return e instanceof t}function T(e){return!D(e)&&e instanceof M(e).HTMLElement}function L(e){return e instanceof M(e).SVGElement}function P(e){return e?D(e)?e.document:E(e)?R(e)?e:T(e)||L(e)?e.ownerDocument:document:document:document}let A=k?x.useLayoutEffect:x.useEffect;function O(e){let t=(0,x.useRef)(e);return A(()=>{t.current=e}),(0,x.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function I(e,t){void 0===t&&(t=[e]);let r=(0,x.useRef)(e);return A(()=>{r.current!==e&&(r.current=e)},t),r}function F(e,t){let r=(0,x.useRef)();return(0,x.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function U(e){let t=O(e),r=(0,x.useRef)(null),n=(0,x.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function B(e){let t=(0,x.useRef)();return(0,x.useEffect)(()=>{t.current=e},[e]),t.current}let q={};function z(e,t){return(0,x.useMemo)(()=>{if(t)return t;let r=null==q[e]?0:q[e]+1;return q[e]=r,e+"-"+r},[e,t])}function _(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>{for(let[n,a]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*a)}return t},{...t})}}let H=_(1),K=_(-1);function V(e){if(!e)return!1;let{KeyboardEvent:t}=M(e.target);return t&&e instanceof t}function $(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=M(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let W=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[W.Translate.toString(e),W.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),X="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",Y={display:"none"};function J(e){let{id:t,value:r}=e;return g().createElement("div",{id:t,style:Y},r)}function G(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return g().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let Q=(0,x.createContext)(null),Z={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ee={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function et(e){let{announcements:t=ee,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=Z}=e,{announce:i,announcement:s}=function(){let[e,t]=(0,x.useState)("");return{announce:(0,x.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),l=z("DndLiveRegion"),[o,d]=(0,x.useState)(!1);if((0,x.useEffect)(()=>{d(!0)},[]),function(e){let t=(0,x.useContext)(Q);(0,x.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,x.useMemo)(()=>({onDragStart(e){let{active:r}=e;i(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&i(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;i(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;i(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;i(t.onDragCancel({active:r,over:n}))}}),[i,t])),!o)return null;let c=g().createElement(g().Fragment,null,g().createElement(J,{id:n,value:a.draggable}),g().createElement(G,{id:l,announcement:s}));return r?(0,C.createPortal)(c,r):c}function er(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(a||(a={}));let en=Object.freeze({x:0,y:0});function ea(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}let ei=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=[];for(let e of n){let{id:n}=e,i=r.get(n);if(i){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height);if(n<a&&r<i){let s=t.width*t.height,l=e.width*e.height,o=(a-n)*(i-r);return Number((o/(s+l-o)).toFixed(4))}return 0}(i,t);r>0&&a.push({id:n,data:{droppableContainer:e,value:r}})}}return a.sort(ea)};function es(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:en}let el=function(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}(1),eo={ignoreTransform:!1};function ed(e,t){void 0===t&&(t=eo);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=M(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;let{scaleX:a,scaleY:i,x:s,y:l}=n,o=e.left-s-(1-a)*parseFloat(r),d=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),c=a?e.width/a:e.width,u=i?e.height/i:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,n))}let{top:n,left:a,width:i,height:s,bottom:l,right:o}=r;return{top:n,left:a,width:i,height:s,bottom:l,right:o}}function ec(e){return ed(e,{ignoreTransform:!0})}function eu(e,t){let r=[];return e?function n(a){var i;if(null!=t&&r.length>=t||!a)return r;if(R(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!T(a)||L(a)||r.includes(a))return r;let s=M(e).getComputedStyle(a);return(a!==e&&function(e,t){void 0===t&&(t=M(e).getComputedStyle(e));let r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let n=t[e];return"string"==typeof n&&r.test(n)})}(a,s)&&r.push(a),void 0===(i=s)&&(i=M(a).getComputedStyle(a)),"fixed"===i.position)?r:n(a.parentNode)}(e):r}function eh(e){let[t]=eu(e,1);return null!=t?t:null}function ep(e){return k&&e?D(e)?e:E(e)?R(e)||e===P(e).scrollingElement?window:T(e)?e:null:null:null}function em(e){return D(e)?e.scrollX:e.scrollLeft}function ex(e){return D(e)?e.scrollY:e.scrollTop}function eg(e){return{x:em(e),y:ex(e)}}function ef(e){return!!k&&!!e&&e===document.scrollingElement}function eb(e){let t={x:0,y:0},r=ef(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y;return{isTop:a,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(i||(i={}));let ey={x:.2,y:.2};function ev(e){return e.reduce((e,t)=>H(e,eg(t)),en)}let ew=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+em(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ex(t),0)}]];class ej{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let r=eu(t),n=ev(r);for(let[t,a,i]of(this.rect={...e},this.width=e.width,this.height=e.height,ew))for(let e of a)Object.defineProperty(this,e,{get:()=>{let a=i(r),s=n[t]-a;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class eN{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eS(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function eC(e){e.preventDefault()}function ek(e){e.stopPropagation()}(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(s||(s={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(l||(l={}));let eD={start:[l.Space,l.Enter],cancel:[l.Esc],end:[l.Space,l.Enter,l.Tab]},eE=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case l.Right:return{...r,x:r.x+25};case l.Left:return{...r,x:r.x-25};case l.Down:return{...r,y:r.y+25};case l.Up:return{...r,y:r.y-25}}};class eM{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new eN(P(t)),this.windowListeners=new eN(M(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(s.Resize,this.handleCancel),this.windowListeners.add(s.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(s.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=ed),!e)return;let{top:r,left:n,bottom:a,right:i}=t(e);eh(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(en)}handleKeyDown(e){if(V(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:a=eD,coordinateGetter:i=eE,scrollBehavior:s="smooth"}=n,{code:o}=e;if(a.end.includes(o)){this.handleEnd(e);return}if(a.cancel.includes(o)){this.handleCancel(e);return}let{collisionRect:d}=r.current,c=d?{x:d.left,y:d.top}:en;this.referenceCoordinates||(this.referenceCoordinates=c);let u=i(e,{active:t,context:r.current,currentCoordinates:c});if(u){let t=K(u,c),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(let r of a){let a=e.code,{isTop:i,isRight:o,isLeft:d,isBottom:c,maxScroll:h,minScroll:p}=eb(r),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}(r),x={x:Math.min(a===l.Right?m.right-m.width/2:m.right,Math.max(a===l.Right?m.left:m.left+m.width/2,u.x)),y:Math.min(a===l.Down?m.bottom-m.height/2:m.bottom,Math.max(a===l.Down?m.top:m.top+m.height/2,u.y))},g=a===l.Right&&!o||a===l.Left&&!d,f=a===l.Down&&!c||a===l.Up&&!i;if(g&&x.x!==u.x){let e=r.scrollLeft+t.x,i=a===l.Right&&e<=h.x||a===l.Left&&e>=p.x;if(i&&!t.y){r.scrollTo({left:e,behavior:s});return}i?n.x=r.scrollLeft-e:n.x=a===l.Right?r.scrollLeft-h.x:r.scrollLeft-p.x,n.x&&r.scrollBy({left:-n.x,behavior:s});break}if(f&&x.y!==u.y){let e=r.scrollTop+t.y,i=a===l.Down&&e<=h.y||a===l.Up&&e>=p.y;if(i&&!t.x){r.scrollTo({top:e,behavior:s});return}i?n.y=r.scrollTop-e:n.y=a===l.Down?r.scrollTop-h.y:r.scrollTop-p.y,n.y&&r.scrollBy({top:-n.y,behavior:s});break}}this.handleMove(e,H(K(u,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eR(e){return!!(e&&"distance"in e)}function eT(e){return!!(e&&"delay"in e)}eM.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=eD,onActivation:a}=t,{active:i}=r,{code:s}=e.nativeEvent;if(n.start.includes(s)){let t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class eL{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=M(e);return e instanceof t?e:P(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=P(i),this.documentListeners=new eN(this.document),this.listeners=new eN(r),this.windowListeners=new eN(M(i)),this.initialCoordinates=null!=(n=$(a))?n:en,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(s.Resize,this.handleCancel),this.windowListeners.add(s.DragStart,eC),this.windowListeners.add(s.VisibilityChange,this.handleCancel),this.windowListeners.add(s.ContextMenu,eC),this.documentListeners.add(s.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eT(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eR(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(s.Click,ek,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(s.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:a}=this,{onMove:i,options:{activationConstraint:s}}=a;if(!n)return;let l=null!=(t=$(e))?t:en,o=K(n,l);if(!r&&s){if(eR(s)){if(null!=s.tolerance&&eS(o,s.tolerance))return this.handleCancel();if(eS(o,s.distance))return this.handleStart()}return eT(s)&&eS(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===l.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eP={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eA extends eL{constructor(e){let{event:t}=e;super(e,eP,P(t.target))}}eA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];let eO={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class eI extends eL{constructor(e){super(e,eO,P(e.event.target))}}eI.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==o.RightClick&&(null==n||n({event:r}),!0)}}];let eF={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eU extends eL{constructor(e){super(e,eF)}static setup(){return window.addEventListener(eF.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eF.move.name,e)};function e(){}}}eU.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t,{touches:a}=r;return!(a.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(d||(d={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(c||(c={}));let eB={x:{[i.Backward]:!1,[i.Forward]:!1},y:{[i.Backward]:!1,[i.Forward]:!1}};(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(u||(u={})),(h||(h={})).Optimized="optimized";let eq=new Map;function ez(e,t){return F(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function e_(e){let{callback:t,disabled:r}=e,n=O(t),a=(0,x.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,x.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function eH(e){return new ej(ed(e),e)}function eK(e,t,r){void 0===t&&(t=eH);let[n,a]=(0,x.useState)(null);function i(){a(n=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=n?n:r)?a:null}let i=t(e);return JSON.stringify(n)===JSON.stringify(i)?n:i})}let s=function(e){let{callback:t,disabled:r}=e,n=O(t),a=(0,x.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,x.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),l=e_({callback:i});return A(()=>{i(),e?(null==l||l.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==s||s.disconnect())},[e]),n}let eV=[];function e$(e,t){void 0===t&&(t=[]);let r=(0,x.useRef)(null);return(0,x.useEffect)(()=>{r.current=null},t),(0,x.useEffect)(()=>{let t=e!==en;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?K(e,r.current):en}function eW(e){return(0,x.useMemo)(()=>e?function(e){let t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}let eX=[],eY=[{sensor:eA,options:{}},{sensor:eM,options:{}}],eJ={current:{}},eG={draggable:{measure:ec},droppable:{measure:ec,strategy:u.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:ed}};class eQ extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let eZ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eQ,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:er},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eG,measureDroppableContainers:er,windowRect:null,measuringScheduled:!1},e0={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:er,draggableNodes:new Map,over:null,measureDroppableContainers:er},e1=(0,x.createContext)(e0),e2=(0,x.createContext)(eZ);function e3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eQ}}}function e5(e,t){switch(t.type){case a.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case a.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case a.DragEnd:case a.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case a.RegisterDroppable:{let{element:r}=t,{id:n}=r,a=new eQ(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case a.SetDroppableDisabled:{let{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;let s=new eQ(e.droppable.containers);return s.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case a.UnregisterDroppable:{let{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let i=new eQ(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function e7(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:a}=(0,x.useContext)(e1),i=B(n),s=B(null==r?void 0:r.id);return(0,x.useEffect)(()=>{if(!t&&!n&&i&&null!=s){if(!V(i)||document.activeElement===i.target)return;let e=a.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(X)?e:e.querySelector(X);if(t){t.focus();break}}})}},[n,t,a,s,i]),null}let e9=(0,x.createContext)({...en,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(p||(p={}));let e4=(0,x.memo)(function(e){var t,r,n,s,l,o;let{id:h,accessibility:m,autoScroll:f=!0,children:b,sensors:y=eY,collisionDetection:v=ei,measuring:w,modifiers:j,...N}=e,[S,D]=(0,x.useReducer)(e5,void 0,e3),[E,R]=function(){let[e]=(0,x.useState)(()=>new Set),t=(0,x.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,x.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[L,P]=(0,x.useState)(p.Uninitialized),O=L===p.Initialized,{draggable:{active:q,nodes:_,translate:K},droppable:{containers:V}}=S,W=null!=q?_.get(q):null,X=(0,x.useRef)({initial:null,translated:null}),Y=(0,x.useMemo)(()=>{var e;return null!=q?{id:q,data:null!=(e=null==W?void 0:W.data)?e:eJ,rect:X}:null},[q,W]),J=(0,x.useRef)(null),[G,Z]=(0,x.useState)(null),[ee,er]=(0,x.useState)(null),ea=I(N,Object.values(N)),eo=z("DndDescribedBy",h),ec=(0,x.useMemo)(()=>V.getEnabled(),[V]),em=(0,x.useMemo)(()=>({draggable:{...eG.draggable,...null==w?void 0:w.draggable},droppable:{...eG.droppable,...null==w?void 0:w.droppable},dragOverlay:{...eG.dragOverlay,...null==w?void 0:w.dragOverlay}}),[null==w?void 0:w.draggable,null==w?void 0:w.droppable,null==w?void 0:w.dragOverlay]),{droppableRects:ex,measureDroppableContainers:ew,measuringScheduled:eN}=function(e,t){let{dragging:r,dependencies:n,config:a}=t,[i,s]=(0,x.useState)(null),{frequency:l,measure:o,strategy:d}=a,c=(0,x.useRef)(e),h=function(){switch(d){case u.Always:return!1;case u.BeforeDragging:return r;default:return!r}}(),p=I(h),m=(0,x.useCallback)(function(e){void 0===e&&(e=[]),p.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),g=(0,x.useRef)(null),f=F(t=>{if(h&&!r)return eq;if(!t||t===eq||c.current!==e||null!=i){let t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new ej(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,i,r,h,o]);return(0,x.useEffect)(()=>{c.current=e},[e]),(0,x.useEffect)(()=>{h||m()},[r,h]),(0,x.useEffect)(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),(0,x.useEffect)(()=>{h||"number"!=typeof l||null!==g.current||(g.current=setTimeout(()=>{m(),g.current=null},l))},[l,h,m,...n]),{droppableRects:f,measureDroppableContainers:m,measuringScheduled:null!=i}}(ec,{dragging:O,dependencies:[K.x,K.y],config:em.droppable}),eS=function(e,t){let r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return F(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(_,q),eC=(0,x.useMemo)(()=>ee?$(ee):null,[ee]),ek=function(){let e=(null==G?void 0:G.autoScrollEnabled)===!1,t="object"==typeof f?!1===f.enabled:!1===f,r=O&&!e&&!t;return"object"==typeof f?{...f,enabled:r}:{enabled:r}}(),eD=ez(eS,em.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e,i=(0,x.useRef)(!1),{x:s,y:l}="boolean"==typeof a?{x:a,y:a}:a;A(()=>{if(!s&&!l||!t){i.current=!1;return}if(i.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=es(r(e),n);if(s||(a.x=0),l||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=eh(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,s,l,n,r])}({activeNode:null!=q?_.get(q):null,config:ek.layoutShiftCompensation,initialRect:eD,measure:em.draggable.measure});let eE=eK(eS,em.draggable.measure,eD),eM=eK(eS?eS.parentElement:null),eR=(0,x.useRef)({activatorEvent:null,active:null,activeNode:eS,collisionRect:null,collisions:null,droppableRects:ex,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eT=V.getNodeFor(null==(t=eR.current.over)?void 0:t.id),eL=function(e){let{measure:t}=e,[r,n]=(0,x.useState)(null),a=e_({callback:(0,x.useCallback)(e=>{for(let{target:r}of e)if(T(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[i,s]=U((0,x.useCallback)(e=>{let r=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return T(t)?t:e}(e);null==a||a.disconnect(),r&&(null==a||a.observe(r)),n(r?t(r):null)},[t,a]));return(0,x.useMemo)(()=>({nodeRef:i,rect:r,setRef:s}),[r,i,s])}({measure:em.dragOverlay.measure}),eP=null!=(r=eL.nodeRef.current)?r:eS,eA=O?null!=(n=eL.rect)?n:eE:null,eO=!!(eL.nodeRef.current&&eL.rect),eI=function(e){let t=ez(e);return es(e,t)}(eO?null:eE),eF=eW(eP?M(eP):null),eU=function(e){let t=(0,x.useRef)(e),r=F(r=>e?r&&r!==eV&&e&&t.current&&e.parentNode===t.current.parentNode?r:eu(e):eV,[e]);return(0,x.useEffect)(()=>{t.current=e},[e]),r}(O?null!=eT?eT:eS:null),eH=function(e,t){void 0===t&&(t=ed);let[r]=e,n=eW(r?M(r):null),[a,i]=(0,x.useState)(eX);function s(){i(()=>e.length?e.map(e=>ef(e)?n:new ej(t(e),e)):eX)}let l=e_({callback:s});return A(()=>{null==l||l.disconnect(),s(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),a}(eU),eQ=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}(j,{transform:{x:K.x-eI.x,y:K.y-eI.y,scaleX:1,scaleY:1},activatorEvent:ee,active:Y,activeNodeRect:eE,containerNodeRect:eM,draggingNodeRect:eA,over:eR.current.over,overlayNodeRect:eL.rect,scrollableAncestors:eU,scrollableAncestorRects:eH,windowRect:eF}),eZ=eC?H(eC,K):null,e0=function(e){let[t,r]=(0,x.useState)(null),n=(0,x.useRef)(e),a=(0,x.useCallback)(e=>{let t=ep(e.target);t&&r(e=>e?(e.set(t,eg(t)),new Map(e)):null)},[]);return(0,x.useEffect)(()=>{let t=n.current;if(e!==t){i(t);let s=e.map(e=>{let t=ep(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,eg(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),n.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{let t=ep(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,x.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>H(e,t),en):ev(e):en,[e,t])}(eU),e4=e$(e0),e6=e$(e0,[eE]),e8=H(eQ,e4),te=eA?el(eA,eQ):null,tt=Y&&te?v({active:Y,collisionRect:te,droppableRects:ex,droppableContainers:ec,pointerCoordinates:eZ}):null,tr=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(tt,0),[tn,ta]=(0,x.useState)(null),ti=(l=eO?eQ:H(eQ,e6),o=null!=(s=null==tn?void 0:tn.rect)?s:null,{...l,scaleX:o&&eE?o.width/eE.width:1,scaleY:o&&eE?o.height/eE.height:1}),ts=(0,x.useRef)(null),tl=(0,x.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==J.current)return;let i=_.get(J.current);if(!i)return;let s=e.nativeEvent,l=new r({active:J.current,activeNode:i,event:s,options:n,context:eR,onAbort(e){if(!_.get(e))return;let{onDragAbort:t}=ea.current,r={id:e};null==t||t(r),E({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!_.get(e))return;let{onDragPending:a}=ea.current,i={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(i),E({type:"onDragPending",event:i})},onStart(e){let t=J.current;if(null==t)return;let r=_.get(t);if(!r)return;let{onDragStart:n}=ea.current,i={activatorEvent:s,active:{id:t,data:r.data,rect:X}};(0,C.unstable_batchedUpdates)(()=>{null==n||n(i),P(p.Initializing),D({type:a.DragStart,initialCoordinates:e,active:t}),E({type:"onDragStart",event:i}),Z(ts.current),er(s)})},onMove(e){D({type:a.DragMove,coordinates:e})},onEnd:o(a.DragEnd),onCancel:o(a.DragCancel)});function o(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:i}=eR.current,l=null;if(t&&i){let{cancelDrop:o}=ea.current;l={activatorEvent:s,active:t,collisions:r,delta:i,over:n},e===a.DragEnd&&"function"==typeof o&&await Promise.resolve(o(l))&&(e=a.DragCancel)}J.current=null,(0,C.unstable_batchedUpdates)(()=>{D({type:e}),P(p.Uninitialized),ta(null),Z(null),er(null),ts.current=null;let t=e===a.DragEnd?"onDragEnd":"onDragCancel";if(l){let e=ea.current[t];null==e||e(l),E({type:t,event:l})}})}}ts.current=l},[_]),to=(0,x.useCallback)((e,t)=>(r,n)=>{let a=r.nativeEvent,i=_.get(n);null!==J.current||!i||a.dndKit||a.defaultPrevented||!0!==e(r,t.options,{active:i})||(a.dndKit={capturedBy:t.sensor},J.current=n,tl(r,t))},[_,tl]),td=(0,x.useMemo)(()=>y.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:to(e.handler,t)}))]},[]),[y,to]);(0,x.useEffect)(()=>{if(!k)return;let e=y.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},y.map(e=>{let{sensor:t}=e;return t})),A(()=>{eE&&L===p.Initializing&&P(p.Initialized)},[eE,L]),(0,x.useEffect)(()=>{let{onDragMove:e}=ea.current,{active:t,activatorEvent:r,collisions:n,over:a}=eR.current;if(!t||!r)return;let i={active:t,activatorEvent:r,collisions:n,delta:{x:e8.x,y:e8.y},over:a};(0,C.unstable_batchedUpdates)(()=>{null==e||e(i),E({type:"onDragMove",event:i})})},[e8.x,e8.y]),(0,x.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=eR.current;if(!e||null==J.current||!t||!a)return;let{onDragOver:i}=ea.current,s=n.get(tr),l=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:l};(0,C.unstable_batchedUpdates)(()=>{ta(l),null==i||i(o),E({type:"onDragOver",event:o})})},[tr]),A(()=>{eR.current={activatorEvent:ee,active:Y,activeNode:eS,collisionRect:te,collisions:tt,droppableRects:ex,draggableNodes:_,draggingNode:eP,draggingNodeRect:eA,droppableContainers:V,over:tn,scrollableAncestors:eU,scrollAdjustedTranslate:e8},X.current={initial:eA,translated:te}},[Y,eS,tt,te,_,eP,eA,ex,V,tn,eU,e8]),function(e){let{acceleration:t,activator:r=d.Pointer,canScroll:n,draggingRect:a,enabled:s,interval:l=5,order:o=c.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:g}=e,f=function(e){let{delta:t,disabled:r}=e,n=B(t);return F(e=>{if(r||!n||!e)return eB;let a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[i.Backward]:e.x[i.Backward]||-1===a.x,[i.Forward]:e.x[i.Forward]||1===a.x},y:{[i.Backward]:e.y[i.Backward]||-1===a.y,[i.Forward]:e.y[i.Forward]||1===a.y}}},[r,t,n])}({delta:m,disabled:!s}),[b,y]=function(){let e=(0,x.useRef)(null);return[(0,x.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,x.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),v=(0,x.useRef)({x:0,y:0}),w=(0,x.useRef)({x:0,y:0}),j=(0,x.useMemo)(()=>{switch(r){case d.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case d.DraggableRect:return a}},[r,a,u]),N=(0,x.useRef)(null),S=(0,x.useCallback)(()=>{let e=N.current;if(!e)return;let t=v.current.x*w.current.x,r=v.current.y*w.current.y;e.scrollBy(t,r)},[]),C=(0,x.useMemo)(()=>o===c.TreeOrder?[...h].reverse():h,[o,h]);(0,x.useEffect)(()=>{if(!s||!h.length||!j){y();return}for(let e of C){if((null==n?void 0:n(e))===!1)continue;let r=p[h.indexOf(e)];if(!r)continue;let{direction:a,speed:s}=function(e,t,r,n,a){let{top:s,left:l,right:o,bottom:d}=r;void 0===n&&(n=10),void 0===a&&(a=ey);let{isTop:c,isBottom:u,isLeft:h,isRight:p}=eb(e),m={x:0,y:0},x={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!c&&s<=t.top+g.height?(m.y=i.Backward,x.y=n*Math.abs((t.top+g.height-s)/g.height)):!u&&d>=t.bottom-g.height&&(m.y=i.Forward,x.y=n*Math.abs((t.bottom-g.height-d)/g.height)),!p&&o>=t.right-g.width?(m.x=i.Forward,x.x=n*Math.abs((t.right-g.width-o)/g.width)):!h&&l<=t.left+g.width&&(m.x=i.Backward,x.x=n*Math.abs((t.left+g.width-l)/g.width)),{direction:m,speed:x}}(e,r,j,t,g);for(let e of["x","y"])f[e][a[e]]||(s[e]=0,a[e]=0);if(s.x>0||s.y>0){y(),N.current=e,b(S,l),v.current=s,w.current=a;return}}v.current={x:0,y:0},w.current={x:0,y:0},y()},[t,S,n,y,s,l,JSON.stringify(j),JSON.stringify(f),b,h,C,p,JSON.stringify(g)])}({...ek,delta:K,draggingRect:te,pointerCoordinates:eZ,scrollableAncestors:eU,scrollableAncestorRects:eH});let tc=(0,x.useMemo)(()=>({active:Y,activeNode:eS,activeNodeRect:eE,activatorEvent:ee,collisions:tt,containerNodeRect:eM,dragOverlay:eL,draggableNodes:_,droppableContainers:V,droppableRects:ex,over:tn,measureDroppableContainers:ew,scrollableAncestors:eU,scrollableAncestorRects:eH,measuringConfiguration:em,measuringScheduled:eN,windowRect:eF}),[Y,eS,eE,ee,tt,eM,eL,_,V,ex,tn,ew,eU,eH,em,eN,eF]),tu=(0,x.useMemo)(()=>({activatorEvent:ee,activators:td,active:Y,activeNodeRect:eE,ariaDescribedById:{draggable:eo},dispatch:D,draggableNodes:_,over:tn,measureDroppableContainers:ew}),[ee,td,Y,eE,D,eo,_,tn,ew]);return g().createElement(Q.Provider,{value:R},g().createElement(e1.Provider,{value:tu},g().createElement(e2.Provider,{value:tc},g().createElement(e9.Provider,{value:ti},b)),g().createElement(e7,{disabled:(null==m?void 0:m.restoreFocus)===!1})),g().createElement(et,{...m,hiddenTextDescribedById:eo}))}),e6=(0,x.createContext)(null),e8="button",te={timeout:25};n={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:r}=e,a={},{styles:i,className:s}=n;if(null!=i&&i.active)for(let[e,r]of Object.entries(i.active))void 0!==r&&(a[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,r));if(null!=i&&i.dragOverlay)for(let[e,t]of Object.entries(i.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=s&&s.active&&t.node.classList.add(s.active),null!=s&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(let[e,r]of Object.entries(a))t.node.style.setProperty(e,r);null!=s&&s.active&&t.node.classList.remove(s.active)}};let tt=["Not Started","In Progress","Blocked","Completed"],tr=["Identified","Contacted","Followed Up","Call Scheduled","Proposal Sent","Negotiating","Confirmed","Lost"],tn={Low:"bg-gray-100 text-gray-700",Medium:"bg-sky-100 text-sky-700",High:"bg-amber-100 text-amber-700",Critical:"bg-red-100 text-red-700"},ta=e=>{if(!e)return"";let t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},ti=e=>{if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?"—":t.toLocaleDateString("en-GB",{day:"2-digit",month:"short"})},ts=({id:e,title:t,count:r,children:n})=>{let{setNodeRef:i,isOver:s}=function(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:i}=e,s=z("Droppable"),{active:l,dispatch:o,over:d,measureDroppableContainers:c}=(0,x.useContext)(e1),u=(0,x.useRef)({disabled:r}),h=(0,x.useRef)(!1),p=(0,x.useRef)(null),m=(0,x.useRef)(null),{disabled:g,updateMeasurementsFor:f,timeout:b}={...te,...i},y=I(null!=f?f:n),v=e_({callback:(0,x.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),m.current=null},b)},[b]),disabled:g||!l}),[w,j]=U((0,x.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),h.current=!1),e&&v.observe(e))},[v])),N=I(t);return(0,x.useEffect)(()=>{v&&w.current&&(v.disconnect(),h.current=!1,v.observe(w.current))},[w,v]),(0,x.useEffect)(()=>(o({type:a.RegisterDroppable,element:{id:n,key:s,disabled:r,node:w,rect:p,data:N}}),()=>o({type:a.UnregisterDroppable,key:s,id:n})),[n]),(0,x.useEffect)(()=>{r!==u.current.disabled&&(o({type:a.SetDroppableDisabled,id:n,key:s,disabled:r}),u.current.disabled=r)},[n,s,r,o]),{active:l,rect:p,isOver:(null==d?void 0:d.id)===n,node:w,over:d,setNodeRef:j}}({id:e});return(0,m.jsxs)("div",{ref:i,className:`flex min-w-[220px] flex-1 flex-col rounded-xl border border-dashed ${s?"border-accent bg-red-50/40":"border-gray-200 bg-gray-50/60"}`,children:[(0,m.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[m.jsx("span",{className:"text-xs font-semibold text-gray-700",children:t}),m.jsx("span",{className:"rounded-full bg-white px-2 py-0.5 text-[11px] text-gray-500",children:r})]}),m.jsx("div",{className:"space-y-2 px-2 pb-2 pt-1",children:n})]})},tl=({task:e,onClick:t})=>{let{attributes:r,listeners:n,setNodeRef:a,transform:i,isDragging:s}=function(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e,i=z("Draggable"),{activators:s,activatorEvent:l,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:h}=(0,x.useContext)(e1),{role:p=e8,roleDescription:m="draggable",tabIndex:g=0}=null!=a?a:{},f=(null==o?void 0:o.id)===t,b=(0,x.useContext)(f?e9:e6),[y,v]=U(),[w,j]=U(),N=(0,x.useMemo)(()=>s.reduce((e,r)=>{let{eventName:n,handler:a}=r;return e[n]=e=>{a(e,t)},e},{}),[s,t]),S=I(r);return A(()=>(u.set(t,{id:t,key:i,node:y,activatorNode:w,data:S}),()=>{let e=u.get(t);e&&e.key===i&&u.delete(t)}),[u,t]),{active:o,activatorEvent:l,activeNodeRect:d,attributes:(0,x.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":n,"aria-pressed":!!f&&p===e8||void 0,"aria-roledescription":m,"aria-describedby":c.draggable}),[n,p,g,f,m,c.draggable]),isDragging:f,listeners:n?void 0:N,node:y,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:b}}({id:e.id});return(0,m.jsxs)("div",{ref:a,style:{transform:i?`translate3d(${i.x}px, ${i.y}px, 0)`:void 0},...n,...r,onClick:t,className:`cursor-pointer rounded-lg border bg-white p-2.5 text-xs shadow-sm transition ${s?"border-accent shadow-md ring-1 ring-accent/40":"border-gray-200"}`,children:[m.jsx("div",{className:"mb-1 flex items-start justify-between gap-2",children:m.jsx("p",{className:"line-clamp-2 text-[13px] font-medium text-gray-900",children:e.title||"(Untitled task)"})}),"Sponsorship"===e.section&&e.company&&m.jsx("p",{className:"mb-1 text-[11px] text-gray-500",children:e.company}),(0,m.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[10px] font-medium ${tn[e.priority]}`,children:e.priority}),m.jsx("span",{className:"text-[10px] text-gray-400",children:ti(e.deadline)})]})]})},to=({open:e,mode:t,section:r,initialTask:n,onClose:a,onSave:i,onDelete:s})=>{let l="Sponsorship"===r,[o,d]=(0,x.useState)(n?.title??""),[c,u]=(0,x.useState)(n?.description??""),[h,p]=(0,x.useState)(n?.owner??""),[g,f]=(0,x.useState)(ta(n?.deadline)),[b,y]=(0,x.useState)(n?.status??"Not Started"),[v,w]=(0,x.useState)(n?.priority??"Medium"),[j,N]=(0,x.useState)(n?.notes??""),[S,C]=(0,x.useState)(n?.pipelineStage??"Identified"),[k,D]=(0,x.useState)(n?.company??""),[E,M]=(0,x.useState)(n?.contactName??""),[R,T]=(0,x.useState)(n?.dealValue?.toString()??""),[L,P]=(0,x.useState)(n?.probability?.toString()??"0"),[A,O]=(0,x.useState)(ta(n?.lastContacted)),[I,F]=(0,x.useState)(ta(n?.nextFollowUp)),[U,B]=(0,x.useState)(n?.source??""),[q,z]=(0,x.useState)(n?.stageNotes??""),[_,H]=(0,x.useState)({});return e?m.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30 px-4",children:(0,m.jsxs)("div",{className:"max-h-[90vh] w-full max-w-xl overflow-y-auto rounded-2xl bg-white p-5 shadow-xl",children:[(0,m.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,m.jsxs)("div",{children:[m.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"add"===t?"Add task":"Edit task"}),(0,m.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[r," \xb7"," ",l?"Sponsorship pipeline":"Status workflow"]})]}),(0,m.jsxs)("button",{onClick:a,className:"rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:[m.jsx("span",{className:"sr-only",children:"Close"}),"\xd7"]})]}),(0,m.jsxs)("div",{className:"mt-4 space-y-4 text-xs",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"mb-1 block font-medium text-gray-700",children:["Title",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{value:o,onChange:e=>d(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"What needs to be done?"}),_.title&&m.jsx("p",{className:"mt-1 text-[11px] text-red-600",children:_.title})]}),(0,m.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Owner"}),m.jsx("input",{value:h,onChange:e=>p(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Person or team"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Deadline"}),m.jsx("input",{type:"date",value:g,onChange:e=>f(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"})]})]}),(0,m.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Status"}),m.jsx("select",{value:b,onChange:e=>y(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",children:tt.map(e=>m.jsx("option",{value:e,children:e},e))})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Priority"}),m.jsx("select",{value:v,onChange:e=>w(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",children:["Low","Medium","High","Critical"].map(e=>m.jsx("option",{value:e,children:e},e))})]})]}),l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Company"}),m.jsx("input",{value:k,onChange:e=>D(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Sponsor company"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Contact name"}),m.jsx("input",{value:E,onChange:e=>M(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Primary contact"})]})]}),(0,m.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Pipeline stage"}),m.jsx("select",{value:S,onChange:e=>C(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",children:tr.map(e=>m.jsx("option",{value:e,children:e},e))})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Deal value (€)"}),m.jsx("input",{type:"number",min:0,step:1e3,value:R,onChange:e=>T(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Probability (%)"}),m.jsx("input",{type:"number",min:0,max:100,value:L,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"}),_.probability&&m.jsx("p",{className:"mt-1 text-[11px] text-red-600",children:_.probability})]})]}),(0,m.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Last contacted"}),m.jsx("input",{type:"date",value:A,onChange:e=>O(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Next follow-up"}),m.jsx("input",{type:"date",value:I,onChange:e=>F(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Source"}),m.jsx("input",{value:U,onChange:e=>B(e.target.value),className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Inbound, intro, etc."})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Stage notes"}),m.jsx("textarea",{value:q,onChange:e=>z(e.target.value),rows:2,className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Negotiation details, blockers, etc."})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Description"}),m.jsx("textarea",{value:c,onChange:e=>u(e.target.value),rows:2,className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2",placeholder:"Context, acceptance criteria, etc."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"mb-1 block font-medium text-gray-700",children:"Notes (internal)"}),m.jsx("textarea",{value:j,onChange:e=>N(e.target.value),rows:2,className:"w-full rounded-md border border-gray-300 px-2.5 py-1.5 text-xs outline-none ring-accent/30 focus:border-accent focus:ring-2"})]})]}),(0,m.jsxs)("div",{className:"mt-5 flex items-center justify-between border-t border-gray-100 pt-3",children:["edit"===t&&s&&m.jsx("button",{onClick:s,className:"rounded-md border border-red-200 px-2.5 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50",children:"Delete task"}),(0,m.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[m.jsx("button",{onClick:a,className:"rounded-md px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-100",children:"Cancel"}),m.jsx("button",{onClick:()=>{let e={};o.trim()||(e.title="Title is required.");let t=0;if(l&&(Number.isNaN(t=Number(L||0))||t<0||t>100)&&(e.probability="Probability must be between 0 and 100."),Object.keys(e).length>0){H(e);return}let s=new Date().toISOString(),d={id:n?.id??crypto.randomUUID(),section:r,title:o.trim(),description:c.trim()||void 0,owner:h.trim()||void 0,deadline:g?new Date(g).toISOString():null,status:b,priority:v,notes:j.trim()||void 0,createdAt:n?.createdAt??s,updatedAt:s};if(l){let e=Number(R||0),r=e*t/100;i({...d,section:"Sponsorship",pipelineStage:S,dealValue:e,contactName:E.trim(),probability:t,expectedRevenue:r,company:k.trim(),lastContacted:A?new Date(A).toISOString():null,nextFollowUp:I?new Date(I).toISOString():null,source:U.trim()||void 0,stageNotes:q.trim()||void 0})}else i(d);a()},className:"rounded-md bg-accent px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-800",children:"add"===t?"Create task":"Save changes"})]})]})]})}):null},td=({section:e,tasks:t,onUpsertTask:r,onDeleteTask:n,onMoveTask:a})=>{let[i,s]=(0,x.useState)("kanban"),[l,o]=(0,x.useState)(!1),[d,c]=(0,x.useState)(null),u="Sponsorship"===e,h=u?tr:tt,p=(0,x.useMemo)(()=>{let e={};return h.forEach(t=>{e[t]=[]}),t.forEach(t=>{let r=u?t.pipelineStage:t.status;e[r]||(e[r]=[]),e[r].push(t)}),e},[t,h,u]),g=e=>{c(e),o(!1)};return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:e}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:u?"Manage the sponsorship pipeline and revenue.":"Track work items and unblock the team."})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsxs)("div",{className:"inline-flex rounded-full bg-gray-100 p-0.5 text-[11px]",children:[m.jsx("button",{onClick:()=>s("kanban"),className:`rounded-full px-2 py-1 ${"kanban"===i?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:"Kanban"}),m.jsx("button",{onClick:()=>s("table"),className:`rounded-full px-2 py-1 ${"table"===i?"bg-white text-gray-900 shadow-sm":"text-gray-500"}`,children:"Table"})]}),m.jsx("button",{onClick:()=>{c(null),o(!0)},className:"inline-flex items-center gap-1 rounded-md bg-accent px-2.5 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-800",children:m.jsx("span",{children:"+ Add task"})})]})]}),"kanban"===i?m.jsx(e4,{onDragEnd:t=>{let{active:r,over:n}=t;n&&a(r.id,e,n.id)},children:m.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 pt-1",children:h.map(e=>m.jsx(ts,{id:e,title:e,count:p[e]?.length??0,children:(p[e]??[]).map(e=>m.jsx(tl,{task:e,onClick:()=>g(e)},e.id))},e))})}):m.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:m.jsx("div",{className:"max-h-[480px] overflow-auto",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-100 text-sm",children:[m.jsx("thead",{className:"bg-gray-50 text-xs uppercase tracking-wide text-gray-500",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left",children:"Task"}),u&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("th",{className:"px-3 py-2 text-left",children:"Company"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"Contact"})]}),m.jsx("th",{className:"px-3 py-2 text-left",children:u?"Stage":"Status"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"Priority"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"Owner"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"Deadline"}),u&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("th",{className:"px-3 py-2 text-right",children:"Deal"}),m.jsx("th",{className:"px-3 py-2 text-right",children:"Prob."}),m.jsx("th",{className:"px-3 py-2 text-right",children:"Expected"}),m.jsx("th",{className:"px-3 py-2 text-left",children:"Next F/U"})]})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white text-xs",children:[0===t.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:u?11:6,className:"px-3 py-6 text-center text-xs text-gray-500",children:"No tasks yet. Use “Add task” to create one."})}),t.map(e=>(0,m.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50",onClick:()=>g(e),children:[m.jsx("td",{className:"max-w-[220px] truncate px-3 py-2 text-gray-900",children:e.title}),u&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("td",{className:"px-3 py-2 text-gray-700",children:e.company||"—"}),m.jsx("td",{className:"px-3 py-2 text-gray-500",children:e.contactName||"—"})]}),m.jsx("td",{className:"px-3 py-2 text-gray-700",children:u?e.pipelineStage:e.status}),m.jsx("td",{className:"px-3 py-2",children:m.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-medium ${tn[e.priority]}`,children:e.priority})}),m.jsx("td",{className:"px-3 py-2 text-gray-500",children:e.owner||"—"}),m.jsx("td",{className:"px-3 py-2 text-gray-700",children:ti(e.deadline)}),u&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:e.dealValue?e.dealValue.toLocaleString("en-US",{maximumFractionDigits:0}):"—"}),m.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:e.probability?`${e.probability}%`:"—"}),m.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:e.expectedRevenue?e.expectedRevenue.toLocaleString("en-US",{maximumFractionDigits:0}):"—"}),m.jsx("td",{className:"px-3 py-2 text-gray-700",children:ti(e.nextFollowUp)})]})]},e.id))]})]})})}),m.jsx(to,{open:l,mode:"add",section:e,onClose:()=>o(!1),onSave:r}),m.jsx(to,{open:!!d,mode:"edit",section:e,initialTask:d??void 0,onClose:()=>c(null),onSave:r,onDelete:d?()=>{n(d),c(null)}:void 0})]})},tc=()=>new Date().toISOString(),tu=(e,t={})=>{let{section:r,...n}=t,a={id:crypto.randomUUID(),title:"",status:"Not Started",priority:"Medium",createdAt:tc(),updatedAt:tc()};return"Sponsorship"===e?{...a,pipelineStage:"Identified",dealValue:0,contactName:"",probability:0,expectedRevenue:0,company:"",...n,section:"Sponsorship",updatedAt:tc()}:{...a,...n,section:e,updatedAt:tc()}},th=()=>{let[e,t]=(0,x.useState)({marketing:[tu("Marketing Communication",{title:"Finalize MBAT email campaign",description:"Send final schedule and logistics email to all participants.",owner:"Comms Team",status:"In Progress",priority:"High"})],merchandise:[],financeLegal:[],schoolRelationships:[],sponsorship:[tu("Sponsorship",{title:"Secure renewal with Main Sponsor",company:"ACME Corp",contactName:"Jane Doe",pipelineStage:"Negotiating",dealValue:5e4,probability:70,expectedRevenue:35e3,status:"In Progress",priority:"Critical",nextFollowUp:new Date(Date.now()+2592e5).toISOString()}),tu("Sponsorship",{title:"New lead: TechCo",company:"TechCo",contactName:"John Smith",pipelineStage:"Contacted",dealValue:3e4,probability:40,expectedRevenue:12e3,status:"In Progress",priority:"High"})]}),r=(0,x.useMemo)(()=>{let t=e.sponsorship,r=t.filter(e=>"Confirmed"===e.pipelineStage).length,n=t.filter(e=>"Confirmed"===e.pipelineStage).reduce((e,t)=>e+t.dealValue,0),a=t.reduce((e,t)=>e+(t.expectedRevenue??t.dealValue*(t.probability??0)/100),0),i=[...e.marketing,...e.merchandise,...e.financeLegal,...e.schoolRelationships,...e.sponsorship],s=new Date,l=new Date(s.getTime()+12096e5),o=i.filter(e=>e.deadline).filter(e=>{let t=new Date(e.deadline);return t>=s&&t<=l}).sort((e,t)=>new Date(e.deadline).getTime()-new Date(t.deadline).getTime()).slice(0,5),d={Critical:4,High:3,Medium:2,Low:1};return{totalSponsorsConfirmed:r,revenueSecured:n,revenueTarget:85e4,pipelineExpectedRevenue:a,upcomingDeadlines:o,highPriorityTasks:i.filter(e=>"Critical"===e.priority||"High"===e.priority).sort((e,t)=>d[t.priority]-d[e.priority]||new Date(e.deadline??"").getTime()-new Date(t.deadline??"").getTime()).slice(0,5)}},[e]);return{sections:e,summary:r,upsertTask:e=>{t(t=>{let r={marketing:[...t.marketing],merchandise:[...t.merchandise],financeLegal:[...t.financeLegal],schoolRelationships:[...t.schoolRelationships],sponsorship:[...t.sponsorship]},n=t=>{let r=t.findIndex(t=>t.id===e.id);if(-1===r)return[...t,{...e,updatedAt:tc()}];let n=[...t];return n[r]={...e,updatedAt:tc()},n};switch(e.section){case"Marketing Communication":r.marketing=n(r.marketing);break;case"Merchandise":r.merchandise=n(r.merchandise);break;case"Finance and Legal":r.financeLegal=n(r.financeLegal);break;case"School Relationships":r.schoolRelationships=n(r.schoolRelationships);break;case"Sponsorship":r.sponsorship=n(r.sponsorship)}return r})},deleteTask:e=>{t(t=>{let r=t=>t.filter(t=>t.id!==e.id);return{marketing:"Marketing Communication"===e.section?r(t.marketing):t.marketing,merchandise:"Merchandise"===e.section?r(t.merchandise):t.merchandise,financeLegal:"Finance and Legal"===e.section?r(t.financeLegal):t.financeLegal,schoolRelationships:"School Relationships"===e.section?r(t.schoolRelationships):t.schoolRelationships,sponsorship:"Sponsorship"===e.section?r(t.sponsorship):t.sponsorship}})},moveTaskInBoard:(e,r,n)=>{t(t=>{let a={marketing:[...t.marketing],merchandise:[...t.merchandise],financeLegal:[...t.financeLegal],schoolRelationships:[...t.schoolRelationships],sponsorship:[...t.sponsorship]},i=(t,r)=>t.map(t=>t.id===e?r(t):t);if("Sponsorship"===r)a.sponsorship=i(a.sponsorship,e=>({...e,pipelineStage:n,updatedAt:tc()}));else switch(r){case"Marketing Communication":a.marketing=i(a.marketing,e=>({...e,status:n,updatedAt:tc()}));break;case"Merchandise":a.merchandise=i(a.merchandise,e=>({...e,status:n,updatedAt:tc()}));break;case"Finance and Legal":a.financeLegal=i(a.financeLegal,e=>({...e,status:n,updatedAt:tc()}));break;case"School Relationships":a.schoolRelationships=i(a.schoolRelationships,e=>({...e,status:n,updatedAt:tc()}))}return a})}}};var tp=r(619),tm=r(2991);let tx=({children:e})=>{let t=(0,b.useRouter)(),r=(0,b.usePathname)(),[n,a]=(0,x.useState)(null),[i,s]=(0,x.useState)(!0),[l,o]=(0,x.useState)(!1);return((0,x.useEffect)(()=>{let e=(0,tm.hm)(e=>{a(e),s(!1),e&&!(0,tp.F)(e.email)?o(!0):o(!1)});return()=>e()},[]),(0,x.useEffect)(()=>{i||n||"/login"===r||t.replace("/login")},[i,n,r,t]),i)?m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:m.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-6 py-4 shadow-sm",children:m.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Checking your access…"})})}):n?l?m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4",children:(0,m.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-red-100 bg-white p-6 shadow-sm",children:[m.jsx("h1",{className:"text-base font-semibold text-gray-900",children:"Access not allowed"}),(0,m.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["The signed-in account"," ",m.jsx("span",{className:"font-medium text-gray-900",children:n.email})," is not on the approved access list for this internal dashboard."]}),m.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Please sign out and try again with an allowed email address."}),m.jsx("div",{className:"mt-4 flex justify-end",children:m.jsx("button",{onClick:async()=>{await (0,f.w7)(y.I),t.replace("/login")},className:"rounded-md bg-accent px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-red-800",children:"Sign out"})})]})}):m.jsx(m.Fragment,{children:e}):m.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:m.jsx("div",{className:"rounded-xl border border-gray-200 bg-white px-6 py-4 shadow-sm",children:m.jsx("p",{className:"text-sm text-gray-700",children:"Redirecting to secure login…"})})})};function tg(){let[e,t]=(0,x.useState)("Dashboard Summary"),{sections:r,summary:n,upsertTask:a,deleteTask:i,moveTaskInBoard:s}=th();return m.jsx(tx,{children:m.jsx(w,{activeSection:e,onSectionChange:t,children:(()=>{if("Dashboard Summary"===e)return m.jsx(S,{totalSponsorsConfirmed:n.totalSponsorsConfirmed,revenueSecured:n.revenueSecured,revenueTarget:n.revenueTarget,pipelineExpectedRevenue:n.pipelineExpectedRevenue,upcomingDeadlines:n.upcomingDeadlines,highPriorityTasks:n.highPriorityTasks});let t={"Marketing Communication":r.marketing,Merchandise:r.merchandise,"Finance and Legal":r.financeLegal,"School Relationships":r.schoolRelationships,Sponsorship:r.sponsorship}[e];return m.jsx(td,{section:e,tasks:t,onUpsertTask:a,onDeleteTask:i,onMoveTask:s})})()})})}},619:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});let n=["salome.mabuse@hec.edu"],a=e=>{if(!e)return!1;let t=e.trim().toLowerCase();return n.some(e=>e.trim().toLowerCase()===t)}},2991:(e,t,r)=>{"use strict";r.d(t,{hm:()=>l,pr:()=>s});var n=r(7294),a=r(902);let i={url:"http://localhost:3000/login",handleCodeInApp:!0},s=async e=>{let t=e.trim();await (0,n.oo)(a.I,t,i)},l=e=>(0,n.Aj)(a.I,e)},902:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var n=r(2585),a=r(7294),i=r(7680);let s=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyCa-T21UqzxUhg8QQ8de1PeZmbaEaseLFA",authDomain:"mbat-dashboard.firebaseapp.com",projectId:"mbat-dashboard",storageBucket:"mbat-dashboard.firebasestorage.app",messagingSenderId:"84425279",appId:"1:84425279:web:837901e631aa973924968a"}),l=(0,a.v0)(s);(0,i.ad)(s)},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var n=r(9510);r(7272);let a={title:"MBAT Operations Dashboard",description:"Internal dashboard for MBAT operations"};function i({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:"min-h-screen bg-gray-50 text-gray-900 antialiased",children:e})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>i,default:()=>l});var n=r(8570);let a=(0,n.createProxy)(String.raw`/Users/salomemabuse/Cursor Projects/mbat-ops-dashboard/app/page.tsx`),{__esModule:i,$$typeof:s}=a;a.default;let l=(0,n.createProxy)(String.raw`/Users/salomemabuse/Cursor Projects/mbat-ops-dashboard/app/page.tsx#default`)},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[819,223],()=>r(28));module.exports=n})();